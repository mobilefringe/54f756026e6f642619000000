<div id="loading_screen">
    <img alt="loading" src="//kodekloud.s3.amazonaws.com/sites/5447ebb66e6f641987020000/3604f5c26997bea3de504de139debcec/loading.gif"/>
</div>
<div  id="main_content" style="display:none">
    <nav>
        <ul class="breadcrumb">
            <li><a href="/home">Home</a></li>
            <li class="active">Kids Club</li>
        </ul>
    </nav>
    <div class="page_banner">
        <h2>Kids' Club</h2>
    </div>
    <div class="inside_page_content">
        <div class="left_column">
            <center>
                <img src= "//kodekloud.s3.amazonaws.com/sites/54f756026e6f642619000000/11c6edce71b99451e7e687ced06be21f/kids-club.gif" alt="">
            </center> 
            <br>
            <div id="mm_page_content"></div>
            <!--<p>Upcoming Kids Club Dates: January 17, February 14, March 14, April 4, May 9, June 20, every Wednesday in July and August, September 26, October 31, November 14 and December 5. Please note that dates are subject to change. Please check the events page for more information or sign up below to receive our newsletter.</p>-->
        </div>
        <div class="right_column">
            <p class="right_column_header">centre information</p>
            <div id="centre_info_container">
                <script id="centre_info_template" type="x-tmpl-mustache/text">
                    <p class="directory_content">{{name}}</p>
                    <p class="directory_content">{{address1}}</p>
                    <p class="directory_content">{{city}}, {{province_state}} {{postal_code}}</p>
                </script>
            </div>
        </div>
    </div>
</div>
<script>
    $(document).ready(function() {
        function renderAll (){
            var propertyDetails = getPropertyDetails();
            renderPageData('#centre_info_container','#centre_info_template',propertyDetails, 'property_details')
            $("#loading_screen").hide();
            $("#main_content").show();
        }
        
        function renderpageHTML(){
            var prefix = get_prefix();
            var pages_json = prefix + "/pages/westmount-kids-club.json"
            $.getJSON(pages_json).done(function(data) {
                $('#mm_page_content').html(data.body);
                $('#mm_page_content_mobile').html(data.body);
            }).fail(function(jqXHR) {
                if (jqXHR.status == 404) {
                    $("#404_msg").fadeIn("fast");
                }
            }); 
        }
        
        function renderPageData(container, template, collection, type){
            var item_list = [];
            var item_rendered = [];
            var template_html = $(template).html();
            Mustache.parse(template_html);   // optional, speeds up future uses
            if (type == "property_details"){
                item_list.push(collection);
                collection = []
                collection = item_list;
            }
            $.each( collection , function( key, val ) {
                var rendered = Mustache.render(template_html,val);
                item_rendered.push(rendered);
            });
            
            $(container).show();
            $(container).html(item_rendered.join(''));
        }

        loadMallData(renderAll);
    });
</script>